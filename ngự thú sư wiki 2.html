<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hồ Sơ Thế Giới - Ngự Thú Đại Lục</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            background-color: #0a0a0c;
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        /* Ẩn thanh cuộn nhưng vẫn cuộn được */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="text-slate-200 selection:bg-blue-500/30 overflow-x-hidden relative min-h-screen p-4 md:p-8">

    <div class="max-w-7xl mx-auto space-y-8">
        
        <div class="text-center space-y-4 pt-4">
            <h1 class="text-4xl md:text-6xl font-black tracking-tight bg-gradient-to-r from-blue-400 via-purple-400 to-rose-400 bg-clip-text text-transparent pb-2 drop-shadow-2xl">
                HỒ SƠ THẾ GIỚI
            </h1>
            <p class="text-slate-400 text-lg max-w-2xl mx-auto font-light">
                Cơ sở dữ liệu phân cấp toàn diện về hệ thống sức mạnh, tổ chức và lịch sử Ngự Thú Đại Lục.
            </p>
        </div>

        <div class="sticky top-0 z-40 bg-[#0a0a0c]/90 backdrop-blur-xl py-4 space-y-4 border-b border-white/5 shadow-2xl transition-all">
            
            <div class="relative max-w-lg mx-auto group">
                <div class="absolute -inset-1 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full opacity-20 group-hover:opacity-40 transition duration-500 blur"></div>
                <div class="relative">
                    <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 group-focus-within:text-blue-400 transition-colors"></i>
                    <input 
                        type="text" 
                        id="searchInput"
                        placeholder="Tra cứu cấp bậc, tổ chức..." 
                        class="w-full pl-12 pr-4 py-3 bg-[#13131a] border border-white/10 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent transition-all placeholder:text-slate-600 text-slate-200"
                    >
                </div>
            </div>

            <div class="flex flex-wrap justify-center gap-2 px-2" id="categoryContainer">
                </div>
        </div>

        <div id="contentGrid" class="grid grid-cols-1 md:grid-cols-2 gap-6 pb-20">
            </div>
        
        <div id="emptyState" class="hidden text-center py-20 text-slate-500">
            <div class="w-20 h-20 bg-slate-900 rounded-full flex items-center justify-center mx-auto mb-6 shadow-inner">
                <i data-lucide="search" class="w-8 h-8 opacity-50"></i>
            </div>
            <h3 class="text-xl font-bold text-slate-400">Không tìm thấy kết quả</h3>
            <p class="mt-2 text-sm">Thử tìm kiếm với từ khóa khác xem sao?</p>
        </div>

        <footer class="text-center text-slate-600 text-sm py-12 border-t border-slate-900">
            <p class="flex items-center justify-center gap-2">
                <i data-lucide="book-open" class="w-4 h-4"></i>
                Wiki Thế Giới Ngự Thú &copy; 2025
            </p>
        </footer>
    </div>

    <div id="detailModal" class="fixed inset-0 z-[100] flex items-center justify-center p-4 hidden">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity" onclick="closeModal()"></div>
        
        <div id="modalContent" class="relative w-full max-w-lg transform overflow-hidden rounded-2xl bg-[#13131a] border border-white/10 p-6 text-left shadow-2xl transition-all shadow-[0_0_50px_rgba(0,0,0,0.5)]">
            <button onclick="closeModal()" class="absolute top-4 right-4 p-2 rounded-full hover:bg-white/10 transition-colors text-slate-400 hover:text-white">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>

            <div id="modalBody"></div>

            <div class="mt-8 flex justify-end gap-3">
                <button onclick="closeModal()" class="px-4 py-2 rounded-lg bg-white/5 hover:bg-white/10 text-slate-300 text-sm font-medium transition-colors">
                    Đóng
                </button>
            </div>
        </div>
    </div>

    <script>
// 1. DATA ĐÃ CẬP NHẬT TUỔI THỌ [cite: 10-70]
        const hierarchyData = [
            {
                id: 1, category: 'power', title: 'Cảnh Giới Ngự Thú Sư', icon: 'users', color: 'bg-blue-900/30 border-blue-500/30',
                steps: [
                    { name: 'Phàm Giai', desc: 'Mới thức tỉnh, cơ thể cường hóa nhẹ. [Tuổi thọ: 100-120 tuổi]', extra: { label: 'Đặc điểm', value: 'Chưa thoát giới hạn phàm nhân' } },
                    { name: 'Hắc Thiết', desc: 'Tinh thần lực nuôi dưỡng ngược lại cơ thể, làm chậm lão hóa. [Tuổi thọ: ~150 tuổi]', extra: { label: 'Sức mạnh', value: 'Nâng vật nặng 100kg bằng ý niệm' } },
                    { name: 'Thanh Đồng', desc: 'Cơ thể đạt đỉnh cao người thường, duy trì rất lâu. [Tuổi thọ: ~200 tuổi]', extra: { label: 'Chiến lực', value: 'Đối đầu vũ khí nóng hạng nhẹ' } },
                    { name: 'Bạch Ngân', desc: 'Linh hồn đủ mạnh để ảnh hưởng sự sống (Thiêu đốt Hồn Hỏa). [Tuổi thọ: ~300 tuổi]', extra: { label: 'Địa vị', value: 'Tinh anh trong quân đội' } },
                    { name: 'Hồng Kim', desc: 'Bắt đầu quá trình "phi phàm hóa", tự chữa lành tổn thương nhỏ. [Tuổi thọ: ~500 tuổi]', extra: { label: 'Quyền hạn', value: 'Lãnh đạo cấp thành phố' } },
                    { name: 'Lam Ngọc', desc: 'Sinh mệnh tính bằng thiên niên kỷ, là "lão quái vật". [Tuổi thọ: ~1,000 tuổi]', extra: { label: 'Sức mạnh', value: 'Phá hủy tòa nhà chọc trời' } },
                    { name: 'Bạch Kim', desc: 'Được thiên địa ưu ái, dung mạo trẻ mãi không già. [Tuổi thọ: ~5,000 tuổi]', extra: { label: 'Danh hiệu', value: 'Tông Sư' } },
                    { name: 'Kim Cương', desc: 'Hồn Hỏa hóa không gian riêng, chỉ chết khi chiến đấu. [Tuổi thọ: ~20,000 tuổi]', extra: { label: 'Quy mô', value: 'Trấn thủ quốc gia' } },
                    { name: 'Ngân Nguyệt', desc: 'Cận Bất Tử. Cơ thể chỉ là vật chứa, sống qua nhiều thời đại. [Tuổi thọ: >50,000 tuổi]', extra: { label: 'Quyền năng', value: 'Thay đổi thời tiết cục bộ' } },
                    { name: 'Diệu Nhật', desc: 'Sinh mệnh hòa làm một với Tinh Thần Lực (Năng lượng thuần túy). [Tuổi thọ: Bất Tử Lý Thuyết]', extra: { label: 'Tôn xưng', value: 'Thánh Nhân / Bán Thần' } }
                ]
            },
            {
                id: 2, category: 'power', title: 'Cấp Bậc Dị Thú', icon: 'swords', color: 'bg-red-900/30 border-red-500/30',
                steps: [
                    { name: 'Cấp 1 (Man Thú)', desc: 'Thú hoang biến dị. [Tuổi thọ: 50-150 năm]', extra: { label: 'Nguy hiểm', value: 'Thấp - Dùng súng đạn xử lý được' } },
                    { name: 'Cấp 2 (Linh Thú)', desc: 'Biết sử dụng nguyên tố, có trí khôn trẻ con. [Tuổi thọ: 50-150 năm]', extra: { label: 'Kỹ năng', value: '1-2 kỹ năng sơ cấp' } },
                    { name: 'Cấp 3 (Quân Chủ)', desc: 'Chúa tể một phương, có "Uy Áp". [Tuổi thọ: 200-800 năm]', extra: { label: 'Lãnh địa', value: 'Một khu rừng hoặc ngọn đồi' } },
                    { name: 'Cấp 4 (Tướng Quân)', desc: 'Da cứng như thép, sinh vật sống lâu năm. [Tuổi thọ: 200-800 năm]', extra: { label: 'Tàn phá', value: 'Phá hủy khu phố' } },
                    { name: 'Cấp 5 (Thống Lĩnh)', desc: 'Nhân chứng cho sự thay đổi qua nhiều thế hệ người. [Tuổi thọ: 1,000-3,000 năm]', extra: { label: 'Quy mô', value: 'Thảm họa thành phố nhỏ' } },
                    { name: 'Cấp 6 (Hoàng Thú)', desc: 'Vua một cõi, năng lượng tác động môi trường. [Tuổi thọ: 1,000-3,000 năm]', extra: { label: 'Sức mạnh', value: 'Ngang bom chiến thuật' } },
                    { name: 'Cấp 7 (Vương Thú)', desc: 'Tồn tại từ trước khi các Thành Lũy được xây dựng. [Tuổi thọ: ~10,000 năm]', extra: { label: 'Đại diện', value: 'Thiên Cẩu Hậu Duệ' } },
                    { name: 'Cấp 8 (Đế Thú)', desc: 'Đo bằng kỷ nguyên địa chất. Một giấc ngủ dài hơn đời người. [Tuổi thọ: ~50,000 năm]', extra: { label: 'Bất tử', value: 'Rất khó bị giết hoàn toàn' } },
                    { name: 'Cấp 9 (Thánh Thú)', desc: 'Sinh vật cổ xưa, một phần của định luật tự nhiên. [Tuổi thọ: Cùng trời đất]', extra: { label: 'Huyền thoại', value: 'Bảo hộ một chủng tộc' } },
                    { name: 'Cấp 10 (Thần Thú)', desc: 'Bản nguyên thế giới, không có bắt đầu hay kết thúc. [Tuổi thọ: Bất Tử Tuyệt Đối]', extra: { label: 'Thần tính', value: 'Vượt qua sinh tử' } }
                ]
            },
            {
                id: 26, category: 'power', title: 'Phân Loại Tính Cách Dị Thú', icon: 'heart-pulse', color: 'bg-pink-900/30 border-pink-500/30',
                steps: [
                    { name: 'Nhóm Thống Lĩnh', desc: 'Cái tôi lớn, thích kiểm soát. Khó thuần phục nhưng chiến lực cực mạnh.', extra: { label: 'Tương tác', value: 'Ghét nhóm Đơn Độc' } },
                    { name: 'Nhóm Bầy Đàn', desc: 'Kỷ luật, trung thành. Sức mạnh tăng khi có đồng đội (Buff).', extra: { label: 'Phù hợp', value: 'Quân đội, Cảnh sát' } },
                    { name: 'Nhóm Đơn Độc', desc: 'Yêu tĩnh lặng, độc lập. Thường là sát thủ, trinh sát.', extra: { label: 'Đặc tính', value: 'Lạnh lùng, hiệu quả' } },
                    { name: 'Nhóm Hỗ Trợ', desc: 'Hiền lành, thích chăm sóc. Thường có kỹ năng hồi phục/tạo giáp.', extra: { label: 'Vai trò', value: 'Bác sĩ, Hậu cần' } }
                ]
            },
            {
                id: 5, category: 'society', title: 'Cấp Bậc Chính Phủ UHA', icon: 'building-2', color: 'bg-gray-800/50 border-gray-500/30',
                steps: [
                    { name: 'Nhân Viên', desc: 'Nhân sự hành chính cơ bản. Làm các công việc giấy tờ, hỗ trợ.', extra: { label: 'Yêu cầu Cảnh giới', value: 'Người Thường / Phàm Giai' } },
                    { name: 'Chuyên Viên', desc: 'Phụ trách chuyên môn kỹ thuật hoặc hiện trường cấp thấp.', extra: { label: 'Yêu cầu Cảnh giới', value: 'Hắc Thiết (Tối thiểu)' } },
                    { name: 'Quản Lý Trung', desc: 'Trưởng/Phó phòng. Chỉ huy đội nhóm nhỏ 10-50 người.', extra: { label: 'Yêu cầu Cảnh giới', value: 'Thanh Đồng / Bạch Ngân' } },
                    { name: 'Quản Lý Cao', desc: 'Cục trưởng/Thị trưởng. Quản lý thành phố hoặc khu vực.', extra: { label: 'Yêu cầu Cảnh giới', value: 'Hồng Kim / Lam Ngọc' } },
                    { name: 'Lãnh Đạo Tối Cao', desc: 'Bộ trưởng/Tổng thống. Quyết sách cấp quốc gia/liên minh.', extra: { label: 'Yêu cầu Cảnh giới', value: 'Bạch Kim / Kim Cương' } }
                ]
            },
            {
                id: 6, category: 'society', title: 'Cấp Bậc Quân Đội UHA', icon: 'shield', color: 'bg-green-900/30 border-green-500/30',
                steps: [
                    { name: 'Binh Sĩ', desc: 'Lực lượng vũ trang cơ bản.', extra: { label: 'Yêu cầu', value: 'Hắc Thiết' } },
                    { name: 'Hạ Sĩ Quan', desc: 'Tiểu đội trưởng.', extra: { label: 'Yêu cầu', value: 'Hắc Thiết Đỉnh Phong' } },
                    { name: 'Sĩ Quan Cấp Úy', desc: 'Đại đội trưởng, chỉ huy chiến thuật.', extra: { label: 'Yêu cầu', value: 'Thanh Đồng' } },
                    { name: 'Sĩ Quan Cấp Tá', desc: 'Chỉ huy trung đoàn/lữ đoàn.', extra: { label: 'Yêu cầu', value: 'Bạch Ngân / Hồng Kim' } },
                    { name: 'Sĩ Quan Cấp Tướng', desc: 'Tư lệnh chiến dịch, trấn thủ biên cương.', extra: { label: 'Yêu cầu', value: 'Lam Ngọc trở lên' } }
                ]
            },
            {
                id: 20, category: 'underground', title: 'Trật Tự Vĩnh Hằng', icon: 'shield', color: 'bg-slate-800 border-slate-500/30',
                steps: [
                    { name: 'Canh Gác Giả', desc: 'Watcher - Những kẻ quan sát lịch sử, ghi chép nhưng không can thiệp.', extra: { label: 'Đặc điểm', value: 'Ẩn mình, Vô danh' } },
                    { name: 'Phán Quan', desc: 'Arbiter - Thành viên Hội Đồng Cân Bằng. Can thiệp khi quy tắc bị phá vỡ.', extra: { label: 'Sức mạnh', value: 'Sử dụng Luật' } },
                    { name: 'Vĩnh Hằng Chi Chủ', desc: 'Thực thể tối cao, có thể là một ý chí của vũ trụ.', extra: { label: 'Tồn tại', value: 'Vượt thời gian' } }
                ]
            },
            {
                id: 24, category: 'world', title: 'Phân Loại Cổng Không Gian', icon: 'globe', color: 'bg-violet-900/30 border-violet-500/30',
                steps: [
                    { name: 'Phàm Tai', desc: 'Cổng nhỏ, xuất hiện ngẫu nhiên. Man Thú tràn ra.', extra: { label: 'Boss đặc trưng', value: 'Dị thú Cấp 1-2' } },
                    { name: 'Thiết Tai', desc: 'Cần đội đặc nhiệm xử lý. Bắt đầu xuất hiện tài nguyên sơ cấp.', extra: { label: 'Boss đặc trưng', value: 'Linh Thú (Cấp 2) Đột Biến' } },
                    { name: 'Ngân Tai', desc: 'Nguy hiểm cao. Cần quân đội phong tỏa.', extra: { label: 'Boss đặc trưng', value: 'Quân Chủ (Cấp 3)' } },
                    { name: 'Ngọc Tai', desc: 'Thảm họa thành phố. Thường chứa di tích cổ.', extra: { label: 'Boss đặc trưng', value: 'Tướng Quân (Cấp 4) / Thống Lĩnh (Cấp 5)' } },
                    { name: 'Kim Tai', desc: 'Thảm họa quốc gia. Không gian bên trong cực lớn.', extra: { label: 'Boss đặc trưng', value: 'Hoàng Thú (Cấp 6)' } },
                    { name: 'Nguyệt Tai', desc: 'Thảm họa châu lục. Nơi sinh sống của các chủng tộc văn minh khác.', extra: { label: 'Boss đặc trưng', value: 'Vương Thú (Cấp 7) / Đế Thú (Cấp 8)' } },
                    { name: 'Nhật Tai', desc: 'Thảm họa diệt thế. Cổng dẫn thẳng đến Vực Sâu hoặc Thế Giới Gốc của Dị Thú.', extra: { label: 'Boss đặc trưng', value: 'Thánh Thú / Thần Thú' } }
                ]
            },
            {
                id: 23, category: 'world', title: 'Phân Loại Thành Lũy', icon: 'building-2', color: 'bg-stone-800 border-stone-500/30',
                steps: [
                    { name: 'Khu Trú Ẩn Cấp IV', desc: 'Cơ sở ngầm hoặc làng nhỏ. Tự cung tự cấp.', extra: { label: 'Trấn thủ giả', value: 'Biệt đội Hắc Thiết' } },
                    { name: 'Thành Lũy Cấp III', desc: 'Thành phố vệ tinh. Có tường thành kiên cố.', extra: { label: 'Trấn thủ giả', value: 'Cường giả Bạch Ngân' } },
                    { name: 'Thành Lũy Cấp II', desc: 'Đô thị lớn. Trung tâm kinh tế vùng.', extra: { label: 'Trấn thủ giả', value: 'Cường giả Hồng Kim / Lam Ngọc' } },
                    { name: 'Thành Lũy Cấp I', desc: 'Siêu đô thị. Có lá chắn năng lượng bao phủ.', extra: { label: 'Trấn thủ giả', value: 'Cường giả Bạch Kim / Kim Cương' } },
                    { name: 'Thánh Đô', desc: 'Trung tâm quyền lực nhân loại. Nơi đặt trụ sở UHA.', extra: { label: 'Trấn thủ giả', value: 'Hội Đồng Diệu Nhật / Ngân Nguyệt' } }
                ]
            },
            {
                id: 30, category: 'rules', title: 'Cơ Chế Di Chuyển (Địa Hình)', icon: 'map', color: 'bg-teal-900/30 border-teal-500/30',
                steps: [
                    { name: 'Vùng An Toàn', desc: 'Hệ số 1.0. Đường nhựa, khu dân cư.', extra: { label: 'Rủi ro', value: '0%' } },
                    { name: 'Hoang Khu Cấp Thấp', desc: 'Hệ số 2.0-5.0. Rừng rậm ven đô, phế tích nhỏ.', extra: { label: 'Rủi ro', value: 'Gặp Man Thú' } },
                    { name: 'Hoang Khu Cấp Trung', desc: 'Hệ số 5.0-20.0. Đầm lầy độc, sa mạc hóa.', extra: { label: 'Rủi ro', value: 'Gặp Linh Thú / Bẫy tự nhiên' } },
                    { name: 'Hoang Khu Cấp Cao', desc: 'Hệ số 20.0-100.0. Trọng lực bất ổn, từ trường loạn.', extra: { label: 'Rủi ro', value: 'Gặp Thú Vương / Lạc đường vĩnh viễn' } },
                    { name: 'Vùng Cấm Địa', desc: 'Hệ số 200.0+. Vùng Zero, Cực Băng Phế Thổ.', extra: { label: 'Cảnh báo', value: 'Quy tắc vật lý đảo lộn' } },
                    { name: 'Vực Sâu Hỗn Loạn', desc: 'Vô hạn. Không gian phi vật lý.', extra: { label: 'Trạng thái', value: 'Điên loạn / Biến dị' } }
                ]
            },
            {
                id: 27, category: 'rankings', title: 'Nhân Tộc Tiềm Long Bảng', icon: 'trophy', color: 'bg-yellow-950/40 border-yellow-500/40',
                steps: [
                    { name: 'Phàm Nhân Bảng', desc: 'Dành cho người mới thức tỉnh (18 tuổi). Cập nhật 1 năm/lần.', extra: { label: 'Tiêu chí', value: 'Tốc độ tu luyện ban đầu' } },
                    { name: 'Hắc Thiết Bảng', desc: 'Top 1000 Hắc Thiết mạnh nhất khu vực. Cập nhật 3 năm/lần.', extra: { label: 'Phần thưởng', value: 'Tài nguyên thăng cấp' } },
                    { name: 'Thanh Đồng Bảng', desc: 'BXH Chiến lực thực tế. Cập nhật 10 năm/lần.', extra: { label: 'Uy tín', value: 'Được các Gia tộc chiêu mộ' } },
                    { name: 'Bạch Ngân Bảng', desc: 'Những kẻ thống trị chiến trường trung cấp. Cập nhật 25 năm/lần.', extra: { label: 'Quyền lợi', value: 'Miễn thuế tại Thành lũy Cấp III' } },
                    { name: 'Hồng Kim Bảng', desc: 'Trụ cột tương lai của nhân loại. Cập nhật 50 năm/lần.', extra: { label: 'Danh vọng', value: 'Tượng đài tại quê hương' } },
                    { name: 'Kim Cương Bảng', desc: 'Huyền thoại sống. Chỉ ghi danh 100 người mạnh nhất thế giới. Cập nhật 300 năm/lần.', extra: { label: 'Quyền lực', value: 'Ngang hàng Nguyên thủ quốc gia' } }
                ]
            },
            {
                id: 32, category: 'items', title: 'Phân Loại Bảo Dược Tăng Tiềm Năng (PC)', icon: 'zap', color: 'bg-lime-900/30 border-lime-500/30',
                steps: [
                    { name: 'Phàm Giai', desc: 'Dược liệu thô sơ, canh thuốc dân gian.', extra: { label: 'Hiệu quả', value: 'Tăng 0.01-0.05 PC' } },
                    { name: 'Thiết Giai', desc: 'Dược dịch đã qua tinh chế sơ cấp.', extra: { label: 'Hiệu quả', value: 'Tăng 0.1-0.3 PC' } },
                    { name: 'Ngân Giai', desc: 'Huyết thanh chiết xuất từ Linh Thú.', extra: { label: 'Hiệu quả', value: 'Tăng 0.5-1.5 PC' } },
                    { name: 'Kim Giai', desc: 'Tinh hoa cô đặc, cải tạo tủy xương.', extra: { label: 'Hiệu quả', value: 'Tăng 2.0-5.0 PC' } },
                    { name: 'Diệu Giai', desc: 'Thiên tài địa bảo hiếm có (Ngàn năm).', extra: { label: 'Hiệu quả', value: 'Tăng 10.0+ PC' } },
                    { name: 'Thánh Giai', desc: 'Nghịch thiên cải mệnh, tái tạo hoàn toàn.', extra: { label: 'Hiệu quả', value: 'Tăng 25.0+ PC' } }
                ]
            },
            {
                id: 31, category: 'rules', title: 'Cơ Chế Tổn Thương', icon: 'activity', color: 'bg-rose-900/30 border-rose-500/30',
                steps: [
                    { name: 'Tổn Thương Bề Mặt', desc: 'Trầy xước, bầm tím. HP giảm nhẹ.', extra: { label: 'Hồi phục', value: 'Tự nhiên hoặc sơ cứu' } },
                    { name: 'Tổn Thương Xuyên Thấu', desc: 'Gãy xương, chảy máu trong, thủng tạng.', extra: { label: 'Hậu quả', value: 'Giảm chỉ số chiến đấu 50%' } },
                    { name: 'Tổn Thương Yếu Huyệt', desc: 'Trúng tim, não, tinh hạch. Phán định TỬ VONG tức thì.', extra: { label: 'Cứu chữa', value: 'Gần như không thể' } }
                ]
            },
            {
                id: 29, category: 'rules', title: 'Quy Tắc Tương Tác Thuộc Tính', icon: 'flame', color: 'bg-indigo-900/30 border-indigo-500/30',
                steps: [
                    { name: 'Cấp 1 (Vật Lý)', desc: 'Hỏa > Kim/Mộc | Thủy > Hỏa/Thổ | Lôi > Thủy/Cơ Giới', extra: { label: 'Cơ chế', value: 'Sát thương x2.0' } },
                    { name: 'Cấp 2 (Trừu Tượng)', desc: 'Không Gian > Vật Lý | Thời Gian > Sinh Học | Tinh Thần > Vật Chất', extra: { label: 'Cơ chế', value: 'Bỏ qua phòng thủ' } },
                    { name: 'Cấp 3 (Khái Niệm)', desc: 'Nhân Quả > Thời Gian | Vận Mệnh > Không Gian | Luân Hồi > Tử Vong', extra: { label: 'Cơ chế', value: 'Viết lại thực tại' } }
                ]
            }
        ];
        const categories = [
            { id: 'all', label: 'Tất Cả', icon: 'menu' },
            { id: 'power', label: 'Sức Mạnh', icon: 'swords' },
            { id: 'items', label: 'Vật Phẩm', icon: 'crown' },
            { id: 'rankings', label: 'Xếp Hạng', icon: 'trophy' },
            { id: 'rules', label: 'Quy Tắc', icon: 'shield' },
            { id: 'society', label: 'Xã Hội', icon: 'users' },
            { id: 'world', label: 'Thế Giới', icon: 'globe' },
        ];

        // 2. LOGIC MÀU SẮC (Giữ nguyên từ code gốc) [cite: 3 - 18]
        const getRankStyle = (name) => {
            const n = name.toLowerCase();
            if (n.includes('phàm') || n.includes('học việc') || n.includes('binh sĩ') || n.includes('sơ khai') || n.includes('cấp 1') || n.includes('bề mặt')) return { bg: 'bg-stone-500/20', text: 'text-stone-300', border: 'border-stone-500/30', glow: 'shadow-stone-500/10', ring: 'ring-stone-500/50' };
            if (n.includes('thiết') || n.includes('cấp 2') || n.includes('hắc') || n.includes('xuyên thấu')) return { bg: 'bg-zinc-600/30', text: 'text-zinc-300', border: 'border-zinc-500/40', glow: 'shadow-zinc-500/10', ring: 'ring-zinc-500/50' };
            if (n.includes('đồng') || n.includes('cấp 3')) return { bg: 'bg-orange-700/20', text: 'text-orange-300', border: 'border-orange-600/30', glow: 'shadow-orange-500/10', ring: 'ring-orange-600/50' };
            if (n.includes('bạc') || n.includes('ngân') || n.includes('cấp 4')) return { bg: 'bg-slate-400/20', text: 'text-slate-200', border: 'border-slate-400/40', glow: 'shadow-slate-400/20', ring: 'ring-slate-400/50' };
            if (n.includes('vàng') || n.includes('kim') || n.includes('cấp 5') || n.includes('hoàng')) return { bg: 'bg-yellow-500/20', text: 'text-yellow-200', border: 'border-yellow-500/40', glow: 'shadow-yellow-500/20', ring: 'ring-yellow-500/50' };
            if (n.includes('ngọc') || n.includes('lục') || n.includes('cấp 6')) return { bg: 'bg-emerald-500/20', text: 'text-emerald-300', border: 'border-emerald-500/40', glow: 'shadow-emerald-500/20', ring: 'ring-emerald-500/50' };
            if (n.includes('lam') || n.includes('cấp 7') || n.includes('vương')) return { bg: 'bg-blue-500/20', text: 'text-cyan-300', border: 'border-cyan-400/40', glow: 'shadow-cyan-500/20', ring: 'ring-cyan-500/50' };
            if (n.includes('tím') || n.includes('tử') || n.includes('cấp 8') || n.includes('đế') || n.includes('yếu huyệt')) return { bg: 'bg-purple-600/30', text: 'text-purple-300', border: 'border-purple-500/40', glow: 'shadow-purple-500/20', ring: 'ring-purple-500/50' };
            if (n.includes('thánh') || n.includes('cấp 9') || n.includes('nguyệt') || n.includes('vực sâu')) return { bg: 'bg-rose-500/20', text: 'text-rose-200', border: 'border-rose-400/40', glow: 'shadow-rose-500/20', ring: 'ring-rose-500/50' };
            if (n.includes('thần') || n.includes('cấp 10') || n.includes('nhật') || n.includes('diệu')) return { bg: 'bg-amber-500/10', text: 'text-amber-100', border: 'border-amber-200/50', glow: 'shadow-[0_0_15px_rgba(251,191,36,0.3)]', ring: 'ring-amber-200/50' };
            // Quy tắc đặc biệt
            if (n.includes('hệ số') || n.includes('an toàn')) return { bg: 'bg-teal-500/20', text: 'text-teal-300', border: 'border-teal-500/40', glow: 'shadow-teal-500/10', ring: 'ring-teal-500/50' };
            if (n.includes('hoang khu')) return { bg: 'bg-orange-800/30', text: 'text-orange-300', border: 'border-orange-600/40', glow: 'shadow-orange-500/10', ring: 'ring-orange-500/50' };
            if (n.includes('cấm địa')) return { bg: 'bg-red-900/40', text: 'text-red-400', border: 'border-red-600/50', glow: 'shadow-red-500/20', ring: 'ring-red-500/50' };
            if (n.includes('tự nhiên') || n.includes('trừu tượng') || n.includes('khái niệm')) return { bg: 'bg-indigo-500/20', text: 'text-indigo-300', border: 'border-indigo-500/40', glow: 'shadow-indigo-500/10', ring: 'ring-indigo-500/50' };
            return { bg: 'bg-slate-800/50', text: 'text-slate-300', border: 'border-slate-700', glow: '', ring: 'ring-slate-600/50' };
        };

        // 3. STATE
        let activeTab = 'all';
        let searchTerm = '';

        // 4. RENDER FUNCTIONS
        function renderTabs() {
            const container = document.getElementById('categoryContainer');
            container.innerHTML = categories.map(cat => `
                <button
                    onclick="setTab('${cat.id}')"
                    class="flex items-center gap-2 px-4 py-2 rounded-full text-xs md:text-sm font-semibold transition-all duration-300 border ${
                        activeTab === cat.id 
                            ? 'bg-white/10 border-blue-500/50 text-blue-300 shadow-[0_0_20px_rgba(59,130,246,0.3)] scale-105' 
                            : 'bg-[#13131a] border-white/5 text-slate-500 hover:bg-white/5 hover:text-slate-300 hover:border-white/10'
                    }"
                >
                    <i data-lucide="${cat.icon}" class="w-4 h-4"></i>
                    ${cat.label}
                </button>
            `).join('');
            lucide.createIcons();
        }

        function renderContent() {
            const grid = document.getElementById('contentGrid');
            const emptyState = document.getElementById('emptyState');

            const filteredData = hierarchyData.filter(item => {
                const matchesCategory = activeTab === 'all' || item.category === activeTab;
                const matchesSearch = item.title.toLowerCase().includes(searchTerm.toLowerCase()) || 
                                    item.steps.some(step => step.name.toLowerCase().includes(searchTerm.toLowerCase()));
                return matchesCategory && matchesSearch;
            });

            if (filteredData.length === 0) {
                grid.innerHTML = '';
                emptyState.classList.remove('hidden');
            } else {
                emptyState.classList.add('hidden');
                grid.innerHTML = filteredData.map(item => `
                    <div class="group relative overflow-visible rounded-2xl border p-6 transition-all duration-500 hover:shadow-2xl hover:-translate-y-1 hover:z-50 ${item.color} bg-[#13131a]/80 backdrop-blur-md">
                        <div class="flex items-center gap-4 mb-8 pb-4 border-b border-white/5 relative z-10">
                            <div class="p-3 rounded-xl bg-gradient-to-br from-white/5 to-transparent border border-white/10 shadow-inner group-hover:scale-110 transition-transform duration-500">
                                <i data-lucide="${item.icon}" class="w-5 h-5 text-white"></i>
                            </div>
                            <div>
                                <h2 class="text-xl font-bold tracking-wide text-white group-hover:text-blue-200 transition-colors">
                                    ${item.title}
                                </h2>
                                <p class="text-xs text-slate-500 mt-1 uppercase tracking-wider font-semibold opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                    ${item.steps.length} cấp độ
                                </p>
                            </div>
                        </div>
                        
                        <div class="flex flex-wrap gap-3 items-center relative z-10">
                            ${item.steps.map((step, index) => {
                                const style = getRankStyle(step.name);
                                // Mã hóa object step thành chuỗi để truyền vào hàm onclick
                                const stepString = encodeURIComponent(JSON.stringify({...step, rankStyle: style, parentTitle: item.title}));
                                return `
<div class="relative group/step">
    <button 
        onclick="openModal('${stepString}')"
        class="relative px-4 py-2 rounded-lg text-sm font-semibold border backdrop-blur-md transition-all duration-300 text-left flex items-center gap-2
        ${style.bg} ${style.text} ${style.border} ${style.glow}
        hover:scale-105 hover:z-20 hover:shadow-lg hover:ring-2 ${style.ring}
        focus:outline-none focus:scale-105"
    >
        ${step.name}
        <i data-lucide="info" class="w-3 h-3 opacity-50 group-hover/step:opacity-100 transition-opacity"></i>
    </button>

    <div class="absolute top-full left-1/2 -translate-x-1/2 mt-3 w-64 opacity-0 invisible group-hover/step:opacity-100 group-hover/step:visible transition-all duration-300 z-[60] pointer-events-none translate-y-[-10px] group-hover/step:translate-y-0">
        <div class="relative bg-[#0F1115] border border-white/20 p-4 rounded-xl shadow-[0_10px_40px_rgba(0,0,0,0.8)] backdrop-blur-xl text-left">
            <div class="absolute -top-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-[#0F1115] border-t border-l border-white/20 rotate-45 transform"></div>
            
            <h4 class="font-bold mb-2 ${style.text}">${step.name}</h4>
            <p class="text-xs text-slate-300 leading-relaxed mb-3 border-b border-white/5 pb-2">${step.desc}</p>
            ${step.extra ? `
                <div class="flex items-center gap-2 text-xs bg-white/5 p-2 rounded border border-white/5">
                    <span class="text-slate-400 font-semibold uppercase text-[10px]">${step.extra.label}:</span>
                    <span class="text-white font-medium">${step.extra.value}</span>
                </div>
            ` : ''}
            <div class="mt-2 text-[10px] text-blue-400 italic text-center">(Nhấn để xem chi tiết)</div>
        </div>
    </div>
</div>
                                    ${index < item.steps.length - 1 ? `<i data-lucide="chevron-right" class="w-4 h-4 text-slate-700 shrink-0 group-hover:text-slate-500 transition-colors"></i>` : ''}
                                `;
                            }).join('')}
                        </div>
                    </div>
                `).join('');
            }
            lucide.createIcons();
        }

        function openModal(stepString) {
            const step = JSON.parse(decodeURIComponent(stepString));
            const modal = document.getElementById('detailModal');
            const modalBody = document.getElementById('modalBody');
            const modalContent = document.getElementById('modalContent');

            // Cập nhật style border cho modal
            modalContent.className = `relative w-full max-w-lg transform overflow-hidden rounded-2xl bg-[#13131a] border border-white/10 p-6 text-left shadow-2xl transition-all shadow-[0_0_50px_rgba(0,0,0,0.5)] ${step.rankStyle.border}`;

            modalBody.innerHTML = `
                <div class="mb-6">
                    <div class="inline-block px-3 py-1 rounded text-xs font-bold uppercase tracking-wider mb-2 border ${step.rankStyle.border} ${step.rankStyle.bg} ${step.rankStyle.text}">
                        ${step.parentTitle}
                    </div>
                    <h3 class="text-3xl font-black ${step.rankStyle.text} mb-2 drop-shadow-md">
                        ${step.name}
                    </h3>
                    <div class="h-1 w-20 bg-gradient-to-r from-current to-transparent opacity-50 rounded-full text-${step.rankStyle.text.split('-')[1]}-400"></div>
                </div>

                <div class="space-y-6">
                    <div class="bg-black/20 p-4 rounded-xl border border-white/5">
                        <h4 class="flex items-center gap-2 text-sm font-bold text-slate-300 mb-2 uppercase tracking-wide">
                            <i data-lucide="book-open" class="w-4 h-4 text-blue-400"></i> Mô tả
                        </h4>
                        <p class="text-slate-300 leading-relaxed text-base">${step.desc}</p>
                    </div>

                    ${step.extra ? `
                        <div class="bg-gradient-to-br from-white/5 to-transparent p-4 rounded-xl border border-white/10">
                            <h4 class="flex items-center gap-2 text-sm font-bold text-yellow-500 mb-2 uppercase tracking-wide">
                                <i data-lucide="star" class="w-4 h-4"></i> Thông tin đặc biệt
                            </h4>
                            <div class="flex flex-col gap-1">
                                <span class="text-slate-400 text-xs uppercase font-semibold">${step.extra.label}</span>
                                <span class="text-xl font-bold text-white">${step.extra.value}</span>
                            </div>
                        </div>
                    ` : ''}

                    <div class="flex items-start gap-3 p-4 bg-blue-900/10 rounded-xl border border-blue-500/20">
                        <i data-lucide="target" class="w-5 h-5 text-blue-400 shrink-0 mt-0.5"></i>
                        <div>
                            <h4 class="text-sm font-bold text-blue-300 mb-1">Ghi chú từ Học Viện</h4>
                            <p class="text-xs text-blue-200/70 italic">
                                "Thông tin trên được trích xuất từ cơ sở dữ liệu Vạn Thú Các. Các chỉ số thực tế có thể dao động tùy thuộc vào biến số môi trường và tài năng cá nhân."
                            </p>
                        </div>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
            lucide.createIcons();
        }

        function closeModal() {
            document.getElementById('detailModal').classList.add('hidden');
        }

        // 5. EVENT LISTENERS
        function setTab(id) {
            activeTab = id;
            renderTabs();
            renderContent();
        }

        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchTerm = e.target.value;
            renderContent();
        });

        // INIT
        renderTabs();
        renderContent();
    </script>
</body>
</html>